<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% block title %}Fundación Un Plan con Café{% endblock %}</title>
    
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos personalizados para mobile-first -->
    <style>
        /* Safe area para dispositivos con notch */
        .safe-area-inset-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        /* Mejoras de accesibilidad para focus visible */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Asegurar que el contenido no quede oculto por la navegación */
        @media (max-width: 640px) {
            main {
                padding-bottom: 5rem;
            }
        }
    </style>
    
    <!-- Meta tags para móviles y PWA -->
    <meta name="theme-color" content="#92400E">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Fundación Un Plan con Café - Apoya nuestros proyectos de bilingüismo y desarrollo comunitario">
    
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen flex flex-col antialiased">
    <!-- Skip to main content link (accesibilidad) -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-amber-900 focus:text-white focus:rounded-md">
        Saltar al contenido principal
    </a>

    <!-- Header -->
    <header role="banner" class="bg-amber-900 text-white shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-3 sm:py-4">
                <h1 class="text-lg sm:text-xl font-bold text-center">
                    Fundación Un Plan con Café
                </h1>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main" class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 pb-20 sm:pb-24 md:pb-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Navegación inferior fija para móviles -->
    <nav role="navigation" aria-label="Navegación principal" class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 shadow-lg z-50 safe-area-inset-bottom">
        <div class="flex justify-around items-stretch h-16 max-w-7xl mx-auto">
            <!-- Home -->
            <a href="{{ url_for('main.home') }}" 
               aria-label="Ir a inicio"
               aria-current="{% if request.endpoint == 'main.home' %}page{% else %}false{% endif %}"
               class="flex flex-col items-center justify-center flex-1 min-w-0 px-1 sm:px-2 {% if request.endpoint == 'main.home' %}text-amber-900 bg-amber-50 font-semibold{% else %}text-gray-600{% endif %} hover:text-amber-900 hover:bg-amber-50 active:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-inset transition-all duration-150">
                <svg class="w-6 h-6 mb-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span class="text-xs font-medium truncate w-full text-center">Home</span>
            </a>
            
            <!-- Donate -->
            <a href="{{ url_for('donations.donations') }}" 
               aria-label="Ir a donaciones"
               aria-current="{% if request.endpoint == 'donations.donations' %}page{% else %}false{% endif %}"
               class="flex flex-col items-center justify-center flex-1 min-w-0 px-1 sm:px-2 {% if request.endpoint == 'donations.donations' %}text-amber-900 bg-amber-50 font-semibold{% else %}text-gray-600{% endif %} hover:text-amber-900 hover:bg-amber-50 active:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-inset transition-all duration-150">
                <svg class="w-6 h-6 mb-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                </svg>
                <span class="text-xs font-medium truncate w-full text-center">Donate</span>
            </a>
            
            <!-- Store -->
            <a href="{{ url_for('store.store') }}" 
               aria-label="Ir a tienda"
               aria-current="{% if request.endpoint == 'store.store' %}page{% else %}false{% endif %}"
               class="flex flex-col items-center justify-center flex-1 min-w-0 px-1 sm:px-2 {% if request.endpoint == 'store.store' %}text-amber-900 bg-amber-50 font-semibold{% else %}text-gray-600{% endif %} hover:text-amber-900 hover:bg-amber-50 active:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-inset transition-all duration-150">
                <svg class="w-6 h-6 mb-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                </svg>
                <span class="text-xs font-medium truncate w-full text-center">Store</span>
            </a>
            
            <!-- Learn -->
            <a href="{{ url_for('learn.learn') }}" 
               aria-label="Ir a bilingüismo"
               aria-current="{% if request.endpoint == 'learn.learn' %}page{% else %}false{% endif %}"
               class="flex flex-col items-center justify-center flex-1 min-w-0 px-1 sm:px-2 {% if request.endpoint == 'learn.learn' %}text-amber-900 bg-amber-50 font-semibold{% else %}text-gray-600{% endif %} hover:text-amber-900 hover:bg-amber-50 active:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-inset transition-all duration-150">
                <svg class="w-6 h-6 mb-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
                <span class="text-xs font-medium truncate w-full text-center">Learn</span>
            </a>
            
            <!-- Podcast -->
            <a href="{{ url_for('podcast.podcast') }}" 
               aria-label="Ir a podcast"
               aria-current="{% if request.endpoint == 'podcast.podcast' %}page{% else %}false{% endif %}"
               class="flex flex-col items-center justify-center flex-1 min-w-0 px-1 sm:px-2 {% if request.endpoint == 'podcast.podcast' %}text-amber-900 bg-amber-50 font-semibold{% else %}text-gray-600{% endif %} hover:text-amber-900 hover:bg-amber-50 active:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-inset transition-all duration-150">
                <svg class="w-6 h-6 mb-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                </svg>
                <span class="text-xs font-medium truncate w-full text-center">Podcast</span>
            </a>
        </div>
    </nav>

    {% block scripts %}{% endblock %}
</body>
</html>
